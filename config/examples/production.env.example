# =============================================================================
# LEGO MCP v8.0 Production Environment Configuration
# =============================================================================
# CLASSIFICATION: UNCLASSIFIED // FOR OFFICIAL USE ONLY
#
# Copy this file to .env and configure for your environment.
# Never commit actual secrets to version control.
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
FLASK_ENV=production
FLASK_DEBUG=false
SECRET_KEY=generate-a-secure-random-key-here

# Application URLs
DASHBOARD_URL=https://lego-mcp.example.com
API_BASE_URL=https://api.lego-mcp.example.com

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://lego_mcp:${DB_PASSWORD}@postgres:5432/lego_mcp
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Read replica for analytics queries
DATABASE_READONLY_URL=postgresql://lego_mcp_readonly:${DB_READONLY_PASSWORD}@postgres-replica:5432/lego_mcp

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/0
REDIS_CACHE_URL=redis://:${REDIS_PASSWORD}@redis:6379/1
REDIS_CELERY_URL=redis://:${REDIS_PASSWORD}@redis:6379/2

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# JWT Settings
JWT_SECRET_KEY=generate-a-secure-jwt-key
JWT_ACCESS_TOKEN_EXPIRES=3600
JWT_REFRESH_TOKEN_EXPIRES=86400

# Session Settings
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Strict

# CORS Settings
CORS_ORIGINS=https://lego-mcp.example.com,https://admin.lego-mcp.example.com

# -----------------------------------------------------------------------------
# Post-Quantum Cryptography
# -----------------------------------------------------------------------------
PQ_CRYPTO_ENABLED=true
PQ_DEFAULT_KEM=ML-KEM-768
PQ_DEFAULT_SIGNATURE=ML-DSA-65
PQ_HYBRID_MODE=true

# -----------------------------------------------------------------------------
# Zero-Trust Configuration
# -----------------------------------------------------------------------------
ZERO_TRUST_ENABLED=true
ZERO_TRUST_POLICY_FILE=/etc/lego-mcp/policies/opa-policy.rego
MTLS_ENABLED=true
MTLS_CA_CERT=/etc/lego-mcp/certs/ca.crt
MTLS_CLIENT_CERT=/etc/lego-mcp/certs/client.crt
MTLS_CLIENT_KEY=/etc/lego-mcp/certs/client.key

# SPIFFE/SPIRE Configuration
SPIFFE_ENDPOINT_SOCKET=unix:///run/spire/sockets/agent.sock
SPIFFE_TRUST_DOMAIN=lego-mcp.example.com

# -----------------------------------------------------------------------------
# HSM Configuration
# -----------------------------------------------------------------------------
HSM_ENABLED=true
HSM_TYPE=yubihsm
HSM_CONNECTOR_URL=https://hsm.internal:12345
HSM_AUTH_KEY_ID=1
# HSM_PASSWORD is stored in HashiCorp Vault

# AWS CloudHSM (alternative)
# HSM_TYPE=cloudhsm
# HSM_CLUSTER_ID=cluster-abc123
# HSM_REGION=us-east-1

# -----------------------------------------------------------------------------
# Observability Configuration
# -----------------------------------------------------------------------------
# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# OpenTelemetry
OTEL_ENABLED=true
OTEL_EXPORTER_OTLP_ENDPOINT=https://otel-collector:4317
OTEL_SERVICE_NAME=lego-mcp-dashboard
OTEL_TRACES_SAMPLER=parentbased_traceidratio
OTEL_TRACES_SAMPLER_ARG=0.1

# SIEM Integration
SIEM_ENABLED=true
SIEM_TYPE=splunk
SIEM_HEC_ENDPOINT=https://splunk.internal:8088
SIEM_HEC_TOKEN=${SPLUNK_HEC_TOKEN}
SIEM_INDEX=lego-mcp-security

# -----------------------------------------------------------------------------
# ROS2 Configuration
# -----------------------------------------------------------------------------
ROS_DOMAIN_ID=42
ROS_SECURITY_ENABLE=true
ROS_SECURITY_STRATEGY=Enforce
ROS_SECURITY_ROOT_DIRECTORY=/etc/ros2/security

# DDS Configuration
CYCLONE_DDS_URI=/etc/cyclonedds/cyclonedds.xml
FASTRTPS_DEFAULT_PROFILES_FILE=/etc/fastrtps/fastrtps_profiles.xml

# -----------------------------------------------------------------------------
# AI/ML Configuration
# -----------------------------------------------------------------------------
# PINN Digital Twin
PINN_MODEL_PATH=/models/pinn
PINN_DEVICE=cuda
PINN_BATCH_SIZE=64

# Uncertainty Quantification
UQ_ENABLED=true
UQ_MC_SAMPLES=100
UQ_CONFIDENCE_THRESHOLD=0.85

# AI Guardrails
AI_GUARDRAILS_ENABLED=true
AI_HUMAN_IN_LOOP_THRESHOLD=0.7
AI_SAFETY_FILTER_ENABLED=true

# -----------------------------------------------------------------------------
# V8 Command Center Configuration
# -----------------------------------------------------------------------------
V8_COMMAND_CENTER_ENABLED=true
V8_ACTION_AUTO_APPROVE=false
V8_COSIM_PARALLEL_SCENARIOS=4
V8_KPI_AGGREGATION_INTERVAL=5

# Action Approval Thresholds
V8_AUTO_APPROVE_COST_LIMIT=1000
V8_AUTO_APPROVE_TIME_IMPACT_HOURS=1

# -----------------------------------------------------------------------------
# Co-Simulation Configuration
# -----------------------------------------------------------------------------
COSIM_ENABLED=true
COSIM_MAX_PARALLEL=4
COSIM_DEFAULT_TIMEOUT=3600
COSIM_MONTE_CARLO_ITERATIONS=1000

# -----------------------------------------------------------------------------
# Compliance Configuration
# -----------------------------------------------------------------------------
# CMMC
CMMC_TARGET_LEVEL=3
CMMC_ASSESSMENT_MODE=continuous

# Audit Trail
AUDIT_ENABLED=true
AUDIT_RETENTION_DAYS=365
AUDIT_HSM_SEALING=true

# SBOM
SBOM_AUTO_GENERATE=true
SBOM_FORMAT=cyclonedx

# -----------------------------------------------------------------------------
# External Integrations
# -----------------------------------------------------------------------------
# HashiCorp Vault (for secrets)
VAULT_ADDR=https://vault.internal:8200
VAULT_ROLE=lego-mcp-production
VAULT_SECRETS_PATH=secret/lego-mcp/production

# External Time Server (PTP)
PTP_GRANDMASTER=192.168.1.1
PTP_DOMAIN=0

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
FEATURE_PQ_CRYPTO=true
FEATURE_ZERO_TRUST=true
FEATURE_PINN_TWIN=true
FEATURE_FORMAL_VERIFICATION=true
FEATURE_COSIMULATION=true
FEATURE_AI_COPILOT=true

# -----------------------------------------------------------------------------
# Maintenance
# -----------------------------------------------------------------------------
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="System is under scheduled maintenance"

# Health Check
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/var/log/lego-mcp/dashboard.log
LOG_MAX_SIZE=100M
LOG_BACKUP_COUNT=10
