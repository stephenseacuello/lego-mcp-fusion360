# Safety Node Parameters
# IEC 61508 SIL 2+ Configuration
#
# IMPORTANT: Changes to these parameters require safety reassessment
# Formal verification must be re-run after modification
#
# Document: SIL2-PARAM-001
# Version: 1.0.0
# Last Modified: 2026-01-07

safety_node:
  ros__parameters:
    # =========================================================================
    # Heartbeat Configuration
    # =========================================================================
    # Heartbeat timeout in milliseconds
    # WCET analysis verified: timeout detection < 1ms
    # Requirement: SAF-004
    heartbeat_timeout_ms: 100

    # =========================================================================
    # GPIO Pin Configuration (Raspberry Pi / Industrial GPIO)
    # =========================================================================
    # Primary relay control output pin
    # Must be connected to primary e-stop relay coil
    primary_relay_pin: 17

    # Secondary relay control output pin
    # Must be connected to secondary e-stop relay coil
    # MUST be different from primary for HFT=1
    secondary_relay_pin: 27

    # Primary relay readback input pin
    # Connected to NC contact of primary relay
    primary_readback_pin: 24

    # Secondary relay readback input pin
    # Connected to NC contact of secondary relay
    secondary_readback_pin: 25

    # =========================================================================
    # Diagnostic Configuration
    # =========================================================================
    # Enable relay state readback verification
    # Required for SIL 2 diagnostic coverage
    enable_readback: true

    # Enable cross-channel monitoring
    # Detects single-channel faults
    enable_cross_monitoring: true

    # Use hardware watchdog (/dev/watchdog)
    # Recommended for SIL 2 systems
    use_hardware_watchdog: true

    # =========================================================================
    # Timing Configuration
    # =========================================================================
    # Periodic safety check interval in milliseconds
    # Must be <= heartbeat_timeout_ms / 4
    periodic_check_ms: 10

    # =========================================================================
    # Advanced Configuration (typically not modified)
    # =========================================================================
    # Relay response timeout in microseconds
    # Maximum time to wait for relay state change
    relay_response_timeout_us: 5000

    # Cross-channel check interval in microseconds
    cross_check_interval_us: 10000

    # Output polarity (true = active low, common for relay modules)
    output_active_low: true

    # Readback polarity (true = active low)
    readback_active_low: true

    # Debounce time in microseconds
    debounce_time_us: 50000
