# LEGO MCP Equipment Parameters
# Connection settings and operational parameters for all equipment

# ============================================================================
# ROBOT ARMS
# ============================================================================

ned2:
  ros__parameters:
    # Connection
    connection_type: ethernet  # ethernet, usb
    ip_address: "192.168.1.10"
    port: 6666

    # Motion parameters
    max_velocity: 0.5          # m/s
    max_acceleration: 1.0      # m/s²
    default_velocity_scale: 0.5

    # Gripper
    gripper_type: custom_lego  # standard, custom_lego
    gripper_force_n: 5.0
    gripper_open_position: 0.03
    gripper_close_position: 0.008

    # LEGO-specific
    lego_approach_distance: 0.03   # meters
    lego_press_force: 2.0          # Newtons
    lego_press_distance: 0.002     # meters

    # Safety
    collision_check: true
    force_limit: 10.0          # Newtons
    torque_limits: [8.0, 8.0, 6.0, 6.0, 4.0, 4.0]  # Per joint

xarm:
  ros__parameters:
    # Connection
    ip_address: "192.168.1.11"
    report_type: rich           # normal, rich, dev

    # Motion parameters
    max_velocity: 0.8           # m/s
    max_acceleration: 2.0       # m/s²
    jerk: 100.0                 # m/s³

    # Gripper
    gripper_type: xarm_gripper
    gripper_speed: 1000         # 0-5000
    gripper_force: 50           # 0-100

    # LEGO-specific
    lego_approach_distance: 0.025
    lego_press_force: 2.5

    # Safety
    collision_sensitivity: 3    # 0-5 (5 = most sensitive)
    self_collision_detection: true
    reduced_mode: false

# ============================================================================
# CNC MACHINES (GRBL-based)
# ============================================================================

bantam_cnc:
  ros__parameters:
    # Connection
    serial_port: "/dev/ttyUSB0"
    baud_rate: 115200
    protocol: tinyg             # tinyg uses JSON, not standard GRBL

    # Machine limits (mm)
    x_max: 150.0
    y_max: 120.0
    z_max: 50.0

    # Default speeds
    feed_rate: 1000.0          # mm/min
    rapid_rate: 2000.0         # mm/min
    spindle_speed: 10000       # RPM

    # TinyG specific
    json_verbosity: 2          # 0-5
    status_report_interval: 100  # ms
    queue_reports: true

    # Safety
    soft_limits: true
    hard_limits: true
    probe_enabled: true

    # LEGO specific (for mold machining)
    lego_mold_depth: 1.6       # stud height in mm
    lego_precision_mode: true

mks_laser:
  ros__parameters:
    # Connection
    serial_port: "/dev/ttyUSB1"
    baud_rate: 115200
    protocol: grbl              # Standard GRBL

    # Machine limits (mm)
    x_max: 300.0
    y_max: 300.0

    # Laser parameters
    max_power: 5000            # mW
    default_power_percent: 50
    pwm_frequency: 1000        # Hz

    # Default speeds
    engrave_speed: 3000.0      # mm/min
    cut_speed: 500.0           # mm/min
    travel_speed: 6000.0       # mm/min

    # Safety
    laser_mode: true           # $32=1 in GRBL
    air_assist: true
    require_door_interlock: true
    auto_focus: false

    # LEGO specific (for brick marking)
    lego_mark_power: 20        # Percent for ABS marking
    lego_mark_speed: 2000      # mm/min

coastrunner:
  ros__parameters:
    # Connection
    serial_port: "/dev/ttyUSB2"
    baud_rate: 115200
    protocol: grbl

    # Machine limits (mm)
    x_max: 220.0
    y_max: 220.0
    z_max: 250.0

    # 3D Print mode
    print_mode_enabled: true
    extruder_steps_per_mm: 93.0
    nozzle_diameter: 0.4

    # CNC mode
    cnc_mode_enabled: true
    spindle_type: router
    max_spindle_rpm: 30000

    # Safety
    heated_bed: true
    max_bed_temp: 110
    max_hotend_temp: 280

# ============================================================================
# 3D PRINTERS
# ============================================================================

formlabs:
  ros__parameters:
    # Connection (PreFormServer Local API)
    api_host: "localhost"
    api_port: 44388
    printer_serial: ""         # Auto-discover if empty

    # Print settings
    default_layer_height: 0.05 # mm
    default_resin: "grey_v4"

    # Post-processing
    auto_wash: true
    wash_time_min: 10
    auto_cure: true
    cure_time_min: 30

    # LEGO specific
    lego_layer_height: 0.025   # High detail for clutch power
    lego_supports_angle: 30    # degrees

    # Monitoring
    poll_interval_sec: 5
    temperature_monitoring: true

# ============================================================================
# SAFETY PARAMETERS
# ============================================================================

safety:
  ros__parameters:
    # E-stop
    estop_gpio_pin: 17         # Raspberry Pi GPIO for hardware e-stop
    watchdog_timeout_ms: 500   # Trigger e-stop if no heartbeat

    # Heartbeat
    heartbeat_rate_hz: 10

    # Speed limits
    robot_max_speed_normal: 0.5    # m/s in normal mode
    robot_max_speed_reduced: 0.25  # m/s when human detected

    # Force limits
    robot_collision_force_n: 50    # Force to trigger collision stop

    # Zone monitoring
    enable_zone_monitoring: true
    human_detection_enabled: false  # Requires depth camera

# ============================================================================
# ROSBRIDGE SETTINGS (for Flask integration)
# ============================================================================

rosbridge:
  ros__parameters:
    port: 9090
    address: "0.0.0.0"
    retry_startup_delay: 5.0
    fragment_timeout: 600
    delay_between_messages: 0
    max_message_size: 10000000
    unregister_timeout: 10.0
