# LEGO MCP Factory Cell Collision Objects
# Static collision geometry for motion planning safety

collision_objects:
  # Main worktable
  - id: "worktable"
    type: "box"
    dimensions: [1.2, 0.8, 0.03]  # 120cm x 80cm table top
    frame_id: "world"
    pose:
      position: [0.6, 0.4, 0.75]
      orientation: [0, 0, 0, 1]
    operation: "add"

  # Formlabs SLA Printer
  - id: "formlabs_printer"
    type: "box"
    dimensions: [0.4, 0.4, 0.8]
    frame_id: "world"
    pose:
      position: [-0.4, 0.4, 0.4]
      orientation: [0, 0, 0, 1]
    operation: "add"

  # TinyG CNC Machine
  - id: "cnc_machine"
    type: "box"
    dimensions: [0.4, 0.3, 0.4]
    frame_id: "world"
    pose:
      position: [0.6, -0.3, 0.2]
      orientation: [0, 0, 0, 1]
    operation: "add"

  # MKS Laser Engraver
  - id: "laser_engraver"
    type: "box"
    dimensions: [0.35, 0.35, 0.3]
    frame_id: "world"
    pose:
      position: [0.6, 1.1, 0.15]
      orientation: [0, 0, 0, 1]
    operation: "add"

  # Table legs (4 corners)
  - id: "table_leg_1"
    type: "box"
    dimensions: [0.05, 0.05, 0.75]
    frame_id: "world"
    pose:
      position: [0.05, 0.05, 0.375]
      orientation: [0, 0, 0, 1]
    operation: "add"

  - id: "table_leg_2"
    type: "box"
    dimensions: [0.05, 0.05, 0.75]
    frame_id: "world"
    pose:
      position: [1.15, 0.05, 0.375]
      orientation: [0, 0, 0, 1]
    operation: "add"

  - id: "table_leg_3"
    type: "box"
    dimensions: [0.05, 0.05, 0.75]
    frame_id: "world"
    pose:
      position: [0.05, 0.75, 0.375]
      orientation: [0, 0, 0, 1]
    operation: "add"

  - id: "table_leg_4"
    type: "box"
    dimensions: [0.05, 0.05, 0.75]
    frame_id: "world"
    pose:
      position: [1.15, 0.75, 0.375]
      orientation: [0, 0, 0, 1]
    operation: "add"

# Safety zones - areas to avoid during motion
safety_zones:
  # Keep-out zone around Formlabs (prevent collisions during printing)
  - id: "formlabs_safety_zone"
    type: "box"
    dimensions: [0.6, 0.6, 1.0]
    frame_id: "world"
    pose:
      position: [-0.4, 0.4, 0.5]
      orientation: [0, 0, 0, 1]
    active_when: "formlabs_printing"  # Only active during prints

  # Keep-out zone around CNC (prevent interference during machining)
  - id: "cnc_safety_zone"
    type: "box"
    dimensions: [0.5, 0.4, 0.5]
    frame_id: "world"
    pose:
      position: [0.6, -0.3, 0.25]
      orientation: [0, 0, 0, 1]
    active_when: "cnc_running"

  # Keep-out zone around laser (eye safety)
  - id: "laser_safety_zone"
    type: "box"
    dimensions: [0.5, 0.5, 0.4]
    frame_id: "world"
    pose:
      position: [0.6, 1.1, 0.2]
      orientation: [0, 0, 0, 1]
    active_when: "laser_active"

# Allowed collision regions (areas where gripper may touch)
allowed_collision_regions:
  # Assembly zone - gripper can touch here
  - id: "assembly_zone"
    type: "box"
    dimensions: [0.3, 0.3, 0.05]
    frame_id: "world"
    pose:
      position: [0.6, 0.4, 0.77]
      orientation: [0, 0, 0, 1]
    allow_collision_with:
      - "ned2_gripper"
      - "xarm_gripper"

  # Pickup zone - gripper can touch here
  - id: "pickup_zone"
    type: "box"
    dimensions: [0.15, 0.2, 0.05]
    frame_id: "world"
    pose:
      position: [0.3, 0.4, 0.77]
      orientation: [0, 0, 0, 1]
    allow_collision_with:
      - "ned2_gripper"
      - "xarm_gripper"
