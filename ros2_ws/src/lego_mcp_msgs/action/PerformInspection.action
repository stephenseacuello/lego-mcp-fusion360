# PerformInspection.action - Perform quality inspection
# LEGO MCP Manufacturing System v7.0
# ISO 9001 / IATF 16949 Compliant

# Goal
string part_id                      # Part to inspect
string serial_number                # Part serial number
string inspection_plan_id           # Inspection plan to follow

# Inspection scope
uint8 inspection_type               # Type (from InspectionResult.msg)
string[] characteristics            # Specific characteristics (empty = all)
bool capture_images                 # Capture inspection images
bool generate_report                # Generate detailed report

# AI options
bool use_ai_detection               # Use AI defect detection
float32 ai_confidence_threshold     # Minimum AI confidence
bool ai_assisted_measurement        # AI-assisted measurement

---
# Result
bool success                        # Inspection completed successfully
string message                      # Human-readable result

# Full inspection result
lego_mcp_msgs/InspectionResult result

# Summary
uint32 measurements_taken           # Total measurements
uint32 measurements_passed          # Measurements in tolerance
uint32 defects_found                # Defects detected
float32 inspection_duration_sec     # Total inspection time

# AI results (if used)
float32 ai_confidence               # Overall AI confidence
uint32 ai_detections                # AI detections count

---
# Feedback
# Current state
string current_check                # Current check being performed
uint32 check_index                  # Current check index
uint32 total_checks                 # Total checks to perform
float32 progress_percent            # Overall progress (0-100)

# Measurements
uint32 measurements_complete        # Measurements completed
lego_mcp_msgs/Measurement current_measurement  # Current measurement

# Defects
uint32 defects_so_far               # Defects found so far
lego_mcp_msgs/DefectDetection latest_defect  # Latest defect (if any)

# Status
string status_message               # Current status
bool waiting_for_part               # Waiting for part positioning
bool manual_intervention_required   # Requires manual intervention
